<!DOCTYPE html>
<html ng-app="vmApp">
<head>
<title>Koop je verse producten</title>
<link href="../css/bootstrap.css" rel="stylesheet" />
<link href="../css/bootstrap-theme.css" rel="stylesheet" />
<link href="versemarkt.css" rel="stylesheet" />
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<script src="../angular/angular.min.js"> </script>
   <script>
    var model = {
        user: "Eve"        
    };
    
    var vmApp = angular.module("vmApp", []);
    
    vmApp.run(function ($http) {
        $http.get("producten.json").success(function (data) {
        model.items = data;
        });
    
    });
    
    vmApp.filter("hiddenItems", function() {
        return function (items, showHidden) {
            var filterResultArr = [];
            angular.forEach(items, function (item) {
                if (item.hide == false || showHidden == true) {
                    filterResultArr.push(item);
                }
            });
            return filterResultArr;
        }
    });
    
    vmApp.controller("VMCtrl", function ($scope) {
        $scope.vm = model;
        
    $scope.countVisibleItems = function () {
        var countV = 0;
        angular.forEach($scope.vm.items, function (item) {
            if (!item.hide) {countV++}
        });
        return countV;
    }
    
    $scope.countHiddenItems = function () {
        var countH = 0;
        angular.forEach($scope.vm.items, function (item) {
            if (item.hide) {countH++}
    
    });
        return countH;
    }
    
    $scope.addNewItem = function (nameNewItem, qtyNewItem) {
        $scope.vm.items.push({hide: false, name: nameNewItem, qty: qtyNewItem, kgprice: "", price: "", pic: "src.." });
    }
    
    $scope.calculatePrice = function (fqty, fkgprice) {
        var price = (fqty) * (fkgprice);
        
        return price;
    }
    
    });
    
</script> 
 
    <header class="header">
<div class="navbar navbar-fixed-top">
<div class="navbar-inner">
<div class="container">
<ul class="nav-else">
<li class="divider-vertical"></li>
<li class="active">
<a href="http://versemarkt.nl/">
<i class="icon-home icon-white"></i>
Home
</a>
</li>
<li class="divider-vertical"></li>
<li class="active">
<a href="buy.html">
<i class="icon-shopping-cart icon-white"></i>
Koop
</a>
</li>
<li class="divider-vertical"></li>
<li class="active">
<a href="sell.html">
<i class="icon-money icon-white"></i>
Verkoop
</a>
</li>
<li class="divider-vertical"></li>
<li class="active">
<a href="kweek.html">
<i class="icon-leaf icon-white"></i>
Kweek
</a>
</li>
</ul>
<form class="navbar-search pull-right ng-pristine ng-valid" action="https://www.google.com/search" method="GET">
<input class="search-query" type="text" placeholder="opzoek naar iets vers?" name="as_q">
<input type="hidden" value="versemarkt.nl" name="as_sitesearch">
</form>
</div>
</div>
</div>
</header>
    
</head>
<body ng-controller="VMCtrl">
<div class="page-header">
<h1>
Verse Markt   
</h1>
    </div>
<div class="panel panel-buy">
    <h3>
    {{vm.user}}'s verse producten
    <span class="label label-default" ng-hide="countVisibleItems() ==0">{{countVisibleItems()}}</span>
</h3>
<div class="input-group">
<!--<input class="form-control" />-->
    <label><input type="text" class="form-control" ng-model="nameNewItem" >Naam</label>
    
    <label><input type="number" class="form-control" ng-model="qtyNewItem" >Aantal (Kg)</label>
    
<!--    <input type="file" class="form-control" ng-model="picNewItem" />-->
<span class="input-group-btn">
<button class="btn btn-default" ng-click="addNewItem(nameNewItem, qtyNewItem, picNewItem)">Add</button>
</span>
</div>
    <br />
<table class="table table-striped">
<thead>
<tr>
<th>Verse</th>
<th>Aantal</th>
<th>Prijs</th>
<th>Foto</th>
<th>Verberg</th>
</tr>
</thead>
<tbody>
    <tr ng-repeat="item in vm.items | hiddenItems:showHidden | orderBy:'name'">
        <td>{{item.name}}</td>
        <td>{{item.qty}}</td>
        <td>{{calculatePrice(item.qty, item.kgprice)}}</td>
        <td>{{item.pic}}</td>
        <td>
            <input type="checkbox" ng-model="item.hide" />
        </td>
    </tr>
</tbody>
</table>
    <div class="checkbox-inline">
    <label><input type="checkbox" ng-model="showHidden"> Toon verborgen producten </label>
        <span class="label label-default" ng-hide="countHiddenItems() ==0">{{countHiddenItems()}}</span>
    </div>
    <span>
    <button class="btn btn-sell" ng-click="searchItemsWithinPriceItem"(priceItem, locationItem, locationUser)>Koop</button>
        </span>
</div>
    <br />
    <div class="footer inline-list">
<ul>
<li>
<a href="/about">About</a>
</li>
<li>
<a href="/help">Help</a>
</li>
<li>
<a href="/tos">Terms</a>
</li>
<li>
<a href="/brand-assets">Brand</a>
</li>
<li>
<a href="/advertise">Advertise</a>
</li>
<li>
<a href="/business">Businesses</a>
</li>
<li>
<span class="copyright"> Â© 2014 Verse Markt</span>
</li>
</ul>
</div>
</body>
</html>