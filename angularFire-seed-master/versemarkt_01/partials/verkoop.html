
<script>
    var model = {
        user: "Adam"        
    };
    
    var myApp = angular.module("myApp", []);
    
    myApp.run(function ($http) {
        $http.get("producten.json").success(function (data) {
        model.items = data;
        });
    
    });
    
    myApp.filter("hiddenItems", function() {
        return function (items, showHidden) {
            var filterResultArr = [];
            angular.forEach(items, function (item) {
                if (item.hide == false || showHidden == true) {
                    filterResultArr.push(item);
                }
            });
            return filterResultArr;
        }
    });
    
    myApp.controller("VMCtrl", function ($scope) {
        $scope.vm = model;
        
    $scope.countVisibleItems = function () {
        var countV = 0;
        angular.forEach($scope.vm.items, function (item) {
            if (!item.hide) {countV++}
        });
        return countV;
    }
    
    $scope.countHiddenItems = function () {
        var countH = 0;
        angular.forEach($scope.vm.items, function (item) {
            if (item.hide) {countH++}
    
    });
        return countH;
    }
    
    $scope.addNewItem = function (nameNewItem, qtyNewItem, kgpriceNewItem, picNewItem) {
        $scope.vm.items.push({hide: false, name: nameNewItem, qty: qtyNewItem, kgprice: kgpriceNewItem, price: "", pic: picNewItem });
    }
    
    $scope.calculatePrice = function (fqty, fkgprice) {
        var price = (fqty) * (fkgprice);
        
        return price;
    }
    
    });
    
</script>
   <div ng-controller="VMCtrl">

<!-- Panel Main Content -->
    
<div class="panel panel-sell">
    <h3>
    {{my.user}}'s verse producten
    <span class="label label-default" ng-hide="countVisibleItems() ==0">{{countVisibleItems()}}</span>
</h3>
<div class="input-group">
<!--<input class="form-control" />-->
    <label><input type="text" class="form-control" ng-model="nameNewItem" >Naam</label>
    
    <label><input type="number" class="form-control" ng-model="qtyNewItem" >Kg</label>
    
    <label><input type="number" class="form-control" ng-model="kgpriceNewItem" >Prijs per Kg</label>
    
     <label><input type="file" class="form-control" ng-model="picNewItem" >Foto</label>
    
<!--    <input type="file" class="form-control" ng-model="picNewItem" />-->
<span class="input-group-btn">
<button class="btn btn-default" ng-click="addNewItem(nameNewItem, qtyNewItem, kgpriceNewItem, picNewItem)">Add</button>
</span>
</div>
    <br />
<table class="table table-striped">
<thead>
<tr>
<th>Verse</th>
<th>Kg</th>
<th>Prijs</th>
<th>Foto</th>
<th>Verberg</th>
</tr>
</thead>
<tbody>
    <tr ng-repeat="item in vm.items | hiddenItems:showHidden | orderBy:'name'">
        <td>{{item.name}}</td>
        <td>{{item.qty}}</td>
        <td>{{calculatePrice(item.qty, item.kgprice)}}</td>
        <td>{{item.pic}}</td>
        <td>
            <input type="checkbox" ng-model="item.hide" />
        </td>
    </tr>
</tbody>
</table>
    <div class="checkbox-inline">
    <label><input type="checkbox" ng-model="showHidden"> Toon verborgen producten </label>
        <span class="label label-default" ng-hide="countHiddenItems() ==0">{{countHiddenItems()}}</span>
    </div>
    <span>
    <button class="btn btn-sell" ng-click="searchItemsWithinPriceItem"(priceItem, locationItem, locationUser)>Verkoop</button>
        </span>
</div>
 </div>      
<br />    